<!DOCTYPE html>
<html>

<head lang="en">
    <title>Test Results Summary Settings</title>
    <meta charset="utf-8" />
    <script src="sdpi-components.js"></script>
</head>

<body>
    <!--
        Learn more about property inspector components at https://sdpi-components.dev/docs/components
    -->
    
    <sdpi-heading>Connection Settings</sdpi-heading>
    
    <sdpi-item label="Organization URL">
        <sdpi-textfield setting="orgUrl" placeholder="https://dev.azure.com/yourorg"></sdpi-textfield>
    </sdpi-item>
    
    <sdpi-item label="Project Name">
        <sdpi-textfield setting="projectName" placeholder="MyProject"></sdpi-textfield>
    </sdpi-item>
    
    <sdpi-item label="Build Definition (Optional)">
        <sdpi-select setting="buildDefinitionName" datasource="getBuildDefinitions" placeholder="All definitions"></sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Test Plan (Optional)">
        <sdpi-select setting="testPlan" datasource="getTestPlans" placeholder="All test plans"></sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Personal Access Token">
        <sdpi-password setting="pat" placeholder="Enter PAT token"></sdpi-password>
    </sdpi-item>
    
    <sdpi-item label="">
        <sdpi-button value="Test Connection" onclick="$pi.sendToPlugin({event: 'testConnection'})"></sdpi-button>
    </sdpi-item>
    
    <sdpi-heading>Display Settings</sdpi-heading>
    
    <sdpi-item label="Display Mode">
        <sdpi-select setting="displayMode" default="summary">
            <option value="summary">Test Summary</option>
            <option value="passrate">Pass Rate</option>
            <option value="failures">Failed Tests</option>
            <option value="trending">Test Trends</option>
            <option value="coverage">Code Coverage</option>
            <option value="duration">Test Duration</option>
        </sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Time Range">
        <sdpi-select setting="timeRange" default="latest">
            <option value="latest">Latest Run</option>
            <option value="today">Today</option>
            <option value="week">This Week</option>
            <option value="month">This Month</option>
        </sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Test Categories">
        <sdpi-select setting="testCategories" multiple="true" datasource="getTestCategories" placeholder="All categories"></sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Failure Threshold">
        <sdpi-range setting="failureThreshold" min="0" max="25" step="5" default="10" showlabels="true"></sdpi-range>
    </sdpi-item>
    
    <sdpi-item label="Show Flaky Tests">
        <sdpi-checkbox setting="showFlakyTests" default="true" label="Highlight flaky test indicators"></sdpi-checkbox>
    </sdpi-item>
    
    <sdpi-item label="Track Regressions">
        <sdpi-checkbox setting="trackRegressions" default="true" label="Alert on test regressions"></sdpi-checkbox>
    </sdpi-item>
    
    <sdpi-item label="Refresh Interval">
        <sdpi-range setting="refreshInterval" min="60" max="600" step="30" default="300" showlabels="true"></sdpi-range>
    </sdpi-item>
    
    <sdpi-item type="textarea" label="Test Metrics">
        <details class="message info">
            <summary>About Test Results Summary</summary>
            This action displays test results and metrics from Azure DevOps:
            â€¢ Pass Rate: Percentage of passing tests
            â€¢ Failed Tests: List of failing test cases
            â€¢ Test Trends: Historical pass/fail trends
            â€¢ Code Coverage: Test coverage percentage
            â€¢ Flaky Tests: Tests with inconsistent results
            â€¢ Test Duration: Execution time metrics
            
            Status Indicators:
            ðŸŸ¢ Green: >95% pass rate
            ðŸŸ¡ Yellow: 80-95% pass rate
            ðŸŸ  Orange: 60-80% pass rate
            ðŸ”´ Red: <60% pass rate or critical failures
        </details>
    </sdpi-item>
    
    <sdpi-item type="textarea" label="PAT Setup">
        <details class="message">
            <summary>Personal Access Token Setup</summary>
            To create a PAT token:
            1. Go to Azure DevOps â†’ User Settings â†’ Personal Access Tokens
            2. Click "New Token"
            3. Select organization and set expiration
            4. Select scopes: Test Management (Read), Build (Read)
            5. Click "Create" and copy the token
        </details>
    </sdpi-item>
</body>
</html>